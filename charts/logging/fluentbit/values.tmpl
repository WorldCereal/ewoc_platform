image:
  repository: hfjcmwgl.gra5.container-registry.ovh.net/world-cereal/fluent-bit
  tag: VALUE1
  pullPolicy: "Always"

imagePullSecrets:
    - name: harborcs

tolerations:
  - key: node-role.kubernetes.io/master
    effect: NoSchedule

logLevel: debug

config:
  inputs: |
    [INPUT]
        Name tail
        Tag argo.*
        Path /var/log/containers/*argo*.log
        DB /var/log/argo.db
        DB.Sync Normal
        Rotate_Wait 10
        Mem_Buf_Limit 10MB
        Parser  docker

  filters: |
    [FILTER]
        Name kubernetes
        Match argo.*
        Merge_Log On
        Keep_Log Off
        K8S-Logging.Parser On
        K8S-Logging.Exclude On
        Kube_Tag_Prefix argo.var.log.containers
    
  outputs: |
    [OUTPUT]
        Name kafka
        Format json
        Match argo.*
        Brokers kafka.logging.svc.cluster.local:9092
        Topics preprocessing.logs
